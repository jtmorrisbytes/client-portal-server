!function(e){var t={};function s(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=12)}([function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("express-session")},function(e,t){e.exports=require("@jtmorrisbytes/lib")},function(e,t){e.exports=require("dotenv")},function(e,t){e.exports=require("morgan")},function(e,t){e.exports=require("massive")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("constants")},function(e,t){e.exports=require("connect-sqlite3")},function(e,t,s){"use strict";s.r(t),function(e){var t=s(5),o=s.n(t),n=s(1),r=s.n(n),i=s(2),a=s.n(i),u=s(0),c=s.n(u),l=s(6),p=s.n(l),f=s(7),d=s.n(f),g=s(8),S=s.n(g),E=s(9),h=s.n(E),m=s(10),y=s.n(m),v=s(3),b=s.n(v),A=s(11),O=s.n(A),R=function(e,t,s,o){return new(s||(s=Promise))((function(n,r){function i(e){try{u(o.next(e))}catch(e){r(e)}}function a(e){try{u(o.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))},w=function(e,t){var s,o,n,r,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,o&&(n=2&r[0]?o.return:r[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,r[1])).done)return n;switch(o=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){i.label=r[1];break}if(6===r[0]&&i.label<n[1]){i.label=n[1],n=r;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(r);break}n[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{s=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},N=(o.a.config(),process.env.SSL_CERT||""),T=process.env.SSL_KEY||"",_=process.env.SSL_CA||"",I=process.env.SESSION_SECRET||"",x=Number(process.env.SERVER_PORT)||3e3,j=process.env.SERVER_HOST||"127.0.0.1",P=r()();P.use(s(14));var D=O()(b.a);b.a;var U={store:new D,secret:I,resave:!1,saveUninitialized:!1,cookie:{maxAge:3e5}};U.cookie.secure=!0,P.use(b()(U)),P.use(r.a.json()),P.use(p()("dev"));var q=s(16);P.use(q.rootPath,q.router);var M=s(25);function L(e){return R(this,void 0,void 0,(function(){var t;return w(this,(function(s){switch(s.label){case 0:return e?[3,2]:[4,d()(M)];case 1:e=s.sent(),s.label=2;case 2:return P.set("db",e),S.a.createServer(P),console.log("launching server in production"),t={key:c.a.readFileSync(a.a.resolve(T||"privkey.pem")),cert:c.a.readFileSync(a.a.resolve(N||"fullchain.pem")),secureOptions:y.a.SSL_OP_NO_SSLv3},_&&(t.ca=[c.a.readFileSync(_)]),[4,h.a.createServer(t,P).listen(x,j,null,null)];case 3:return[2,s.sent()];case 4:return[3,6];case 5:return[2,s.sent()];case 6:return console.log("launching server in test mode"),[4,P.listen(x,j)];case 7:return[2,s.sent()]}}))}))}L().then((function(e){console.log("server listening on "+j+":"+x)}))}.call(this,s(13)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,s){e.exports=s(15)({contentSecurityPolicy:{directives:{defaultSrc:["'self'"],styleSrc:["'self'","https://stackpath.bootstrapcdn.com/","https://www.aspiesolutions.com/","http://localhost:3000/"]}},expectCt:{maxAge:0,reportUri:"http://aspiesolutions.com/reportct"},featurePolicy:{features:{layoutAnimations:["'self'"],syncScript:["'self'"],documentDomain:["'none'"]}}})},function(e,t){e.exports=require("helmet")},function(e,t,s){const o=s(1).Router,n=(s(0),s(2),process.env.API_ROOT||"/api"),r=o(),{enforceUserLoggedIn:i}=s(17);const a=s(18),{REACT_APP_CLIENT_ID:u}=process.env;r.post(a.basePath+"/logout",a.controller.logOut),r.use(a.basePath,a.router),r.use(i),e.exports={router:r,rootPath:n}},function(e,t,s){const{REASON:o,MESSAGE_NOT_AUTHORIZED:n}=s(4).constants;e.exports={enforceUserLoggedIn:function(e,t,s){e.session.user||t.status(401).json({message:n,reason:o.LOGIN.REQUIRED,path:"/api/auth/login"})}}},function(e,t,s){const o=s(19),{logIn:n,logOut:r,register:i,getUser:a,startAuthSession:u,checkAuthState:c,getSession:l}=o,p=s(1).Router();p.post("/",u),p.get("/user",a),p.get("/session",l),p.post("/register",c,i),p.post("/login",c,n),e.exports={router:p,basePath:"/auth",controller:{logIn:n,logOut:r,register:i}}},function(e,t,s){const{validateEmail:o,validatePassword:n,constants:r}=s(4),i=s(20),a=s(21),u=s(22),c=s(23).inpect||(e=>{}),l=s(24),{MESSAGE_NOT_AUTHORIZED:p,MESSAGE_BAD_REQUEST:f,REASON:d,MESSAGE_NOT_FOUND:g,MESSAGE:S,PASSWORD:E,MAX_ELAPSED_REQUEST_TIME:h}=r,{NIST:m}=E;e.exports={register:async function(e,t){try{const{firstName:s,lastName:r,email:c,phoneNumber:l,streetAddress:p,city:f,state:g,zip:S,password:E}=e.body.user;console.log("/api/auth/register called"),console.dir(e.body),console.dir(e.query);const h=e.app.get("db");if(!c)return void t.status(400).json({message:"field email is required",reason:d.REQUIRED.FIELD});if(!o(c))return void t.status(400).json({message:`invalid email '${c}'`});if((await h.user.getByEmail(c)).length>0)return void t.status(400).json({message:`email ${c} is already in use`});if(!E)return void t.status(400).json({message:"field password is required",reason:d.REQUIRED.FIELD});let y=n(E);if(!1===y.isValid)return void t.status(400).json({message:y.description,reason:y.reason});if(process.env.NIST_TOKEN){console.log("attempting NIST check with token ",process.env.NIST_TOKEN);let e=u(E),{found:s}=await a.get(m.URL+e+"?api_key="+process.env.NIST_TOKEN);if(s)return console.log("Password found in NIST Database, Refusing to allow password"),void t.status(400).json({message:m.MESSAGE,reason:m.REASON,info:"https://pages.nist.gov/800-63-3/"});console.log("Password not found in NIST Database. continuing")}let v=Buffer.from(E).toString("base64"),b=await i.hash(v,await i.genSalt(15)),A=(await h.user.create(s,r,b,c,l,p,f,g,S))[0];console.log("/api/auth/register DB create user result",A),e.session.user={id:A.users_id},t.json({session:e.session})}catch(e){process.stdout.write("Failed to register user ");let s={message:S.GENERAL_FAILURE,reason:d.ERROR.UNKNOWN,error:e};e instanceof SyntaxError?(process.stdout.write("because of a syntax error "),s.reason=d.ERROR.SYNTAX):e instanceof TypeError&&(process.stdout.write("because of a Type Error "),s.reason=d.ERROR.TYPE),t.status(500).json(s),process.stdout.write("with stacktrace:\n"),console.error(e)}},logIn:async function(e,t){console.log("/api/auth/login: login requested user object",e.body.user||"NOT FOUND");try{let{email:s,password:o}=e.body.user;if(s)if(o){console.log("searching database for username");let n=await e.app.get("db").user.getByEmail(s);if(0===n.length)console.warn(`/api/auth/login: user '${s.substr(0,s.indexOf("@")-2)}' not found`),t.status(401).json({message:p,reason:d.USER.NOT_FOUND});else{let s=n[0];console.log("/api/auth/login user found, comparing hash"),authenticated=await i.compare(Buffer.from(o).toString("base64"),s.hash),authenticated?(console.log("logging in user with id:",s.users_id),e.session.user={id:s.users_id},t.json({session:e.session})):(console.warn("/api/auth/login recieved an invalid password"),t.status(401).json({message:p,reason:d.LOGIN.PASSWORD.MISSING}))}}else console.warn("/api/auth/login: password was missing from request"),console.dir(e.body),console.dir(e.query),t.status(400).json({message:f,reason:d.LOGIN.PASSWORD.MISSING});else console.warn("/api/auth/login: email was missing from request"),t.status(400).json({message:f,reason:d.LOGIN.EMAIL.MISSING})}catch(e){process.stdout.write("Failed to log in user ");let s={message:S.GENERAL_FAILURE,reason:d.ERROR.UNKOWN,error:e};e instanceof TypeError&&(process.stdout.write("because of a TypeError"),s.reason=d.ERROR.TYPE),e instanceof ReferenceError&&(process.stdout.write("because of a ReferenceError"),s.reason=d.ERROR.REFERENCE),process.stdout.write(" with stacktrace\n"+c(e)),t.status(500).json(s)}},logOut:async function(e,t){e.session.destroy(),e.clearCookie("connect.sid"),t.sendStatus(200)},getUser:function(e,t){let s=(e.session||{}).user||null;t.json({user:s})},startAuthSession:function(e,t){const s=l.randomBytes(64).toString("base64"),o={state:s,timestamp:Date.now(),ipAddr:e.connection.remoteAddress};e.app.set(s,o),t.json(o)},checkAuthState:function(e,t,s){if(!e.body)return void t.status(400).json({message:f,reason:"MISSING_REQUEST_BODY"});if(!e.body.state)return void t.status(401).json({message:p,reason:d.AUTH.STATE_MISSING,path:"body"});let o=e.app.get(e.body.state);return o?o.ipAddr!=e.connection.remoteAddress?(e.app.set(o.state,void 0),void t.status(401).json({message:p,reason:d.AUTH.IP_MISMATCH})):Date.now()>o.timestamp+h?(e.app.set(o.state,void 0),void t.status(401).json({message:p,reason:d.AUTH.SESSION_EXPIRED})):void s():(console.log(o,e.body.state),void t.status(401).json({message:p,reason:d.AUTH.STATE_NOT_FOUND}))},getSession:async function(e,t){try{let s=e.session||null;t.send(s)}catch(e){console.error("Failed to get session")}}}},function(e,t){e.exports=require("bcryptjs")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("sha1")},function(e,t){e.exports=require("util")},function(e,t){e.exports=require("crypto")},function(e,t,s){const o=s(0);let{DATABASE_USERNAME:n,DATABASE_PASSWORD:r,DATABASE_HOST:i,DATABASE_PORT:a,DATABASE_NAME:u,NODE_ENV:c,CI:l}=process.env;function p(e,t){return e?String(e).trim():t}c=p(c,"test");let f={host:p(i,"localhost"),port:p(a,"5432"),database:p(u,"testUser"),user:p(n,"postgres"),password:p(r,"")};console.log(`configureMassive: NODE_ENV is ${c}, config is`,f),console.log("Configuring massive "),"production"===c?(console.log("for production\r\n"),f.ssl={mode:"require",ca:o.readFileSync("db.ca-certificate.crt")}):"development"===c?console.log(" for development\n"):(console.log("for testing "),l?(console.log("on CI\r\n"),console.log("on a local machine")):f.ssl={mode:!0,rejectUnauthorized:!1}),e.exports=f}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiZnNcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJleHByZXNzXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwicGF0aFwiIiwid2VicGFjazovLy9leHRlcm5hbCBcImV4cHJlc3Mtc2Vzc2lvblwiIiwid2VicGFjazovLy9leHRlcm5hbCBcIkBqdG1vcnJpc2J5dGVzL2xpYlwiIiwid2VicGFjazovLy9leHRlcm5hbCBcImRvdGVudlwiIiwid2VicGFjazovLy9leHRlcm5hbCBcIm1vcmdhblwiIiwid2VicGFjazovLy9leHRlcm5hbCBcIm1hc3NpdmVcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJodHRwXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiaHR0cHNcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJjb25zdGFudHNcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJjb25uZWN0LXNxbGl0ZTNcIiIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2hhcm1vbnktbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9jb25maWd1cmVIZWxtZXQuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiaGVsbWV0XCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JvdXRlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvZW5mb3JjZUF1dGguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JvdXRlcy9hdXRoLmpzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9hdXRoLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcImJjcnlwdGpzXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiYXhpb3NcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJzaGExXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwidXRpbFwiIiwid2VicGFjazovLy9leHRlcm5hbCBcImNyeXB0b1wiIiwid2VicGFjazovLy8uL3NyYy9jb25maWd1cmVNYXNzaXZlLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicmVxdWlyZSIsIlNTTF9DRVJUIiwiY29uZmlnIiwicHJvY2VzcyIsImVudiIsIlNTTF9LRVkiLCJTU0xfQ0EiLCJTRVNTSU9OX1NFQ1JFVCIsIlNFUlZFUl9QT1JUIiwiTnVtYmVyIiwiU0VSVkVSX0hPU1QiLCJhcHAiLCJ1c2UiLCJTUUxpdGVTdG9yZSIsInNlc3Npb25Db25maWciLCJzdG9yZSIsInNlY3JldCIsInJlc2F2ZSIsInNhdmVVbmluaXRpYWxpemVkIiwiY29va2llIiwibWF4QWdlIiwic2VjdXJlIiwianNvbiIsInJvdXRlcyIsInJvb3RQYXRoIiwicm91dGVyIiwiTUFTU0lWRV9DT05GSUciLCJtYWluIiwiZGIiLCJzZXQiLCJjcmVhdGVTZXJ2ZXIiLCJjb25zb2xlIiwibG9nIiwiU1NMX09QVFMiLCJyZWFkRmlsZVN5bmMiLCJyZXNvbHZlIiwiY2VydCIsInNlY3VyZU9wdGlvbnMiLCJTU0xfT1BfTk9fU1NMdjMiLCJjYSIsImxpc3RlbiIsInRoZW4iLCJzZXJ2ZXIiLCJvcmlnaW5hbE1vZHVsZSIsIndlYnBhY2tQb2x5ZmlsbCIsImNoaWxkcmVuIiwiY29udGVudFNlY3VyaXR5UG9saWN5IiwiZGlyZWN0aXZlcyIsImRlZmF1bHRTcmMiLCJzdHlsZVNyYyIsImV4cGVjdEN0IiwicmVwb3J0VXJpIiwiZmVhdHVyZVBvbGljeSIsImZlYXR1cmVzIiwibGF5b3V0QW5pbWF0aW9ucyIsInN5bmNTY3JpcHQiLCJkb2N1bWVudERvbWFpbiIsIlJvdXRlciIsIkFQSV9ST09UIiwiZW5mb3JjZVVzZXJMb2dnZWRJbiIsImF1dGgiLCJSRUFDVF9BUFBfQ0xJRU5UX0lEIiwicG9zdCIsImJhc2VQYXRoIiwiY29udHJvbGxlciIsImxvZ091dCIsIlJFQVNPTiIsIk1FU1NBR0VfTk9UX0FVVEhPUklaRUQiLCJjb25zdGFudHMiLCJyZXEiLCJyZXMiLCJuZXh0Iiwic2Vzc2lvbiIsInVzZXIiLCJzdGF0dXMiLCJtZXNzYWdlIiwicmVhc29uIiwiTE9HSU4iLCJSRVFVSVJFRCIsInBhdGgiLCJsb2dJbiIsInJlZ2lzdGVyIiwiZ2V0VXNlciIsInN0YXJ0QXV0aFNlc3Npb24iLCJjaGVja0F1dGhTdGF0ZSIsImdldFNlc3Npb24iLCJ2YWxpZGF0ZUVtYWlsIiwidmFsaWRhdGVQYXNzd29yZCIsImJjcnlwdCIsImF4aW9zIiwic2hhMSIsImluc3BlY3QiLCJpbnBlY3QiLCJjcnlwdG8iLCJNRVNTQUdFX0JBRF9SRVFVRVNUIiwiTUVTU0FHRV9OT1RfRk9VTkQiLCJNRVNTQUdFIiwiUEFTU1dPUkQiLCJNQVhfRUxBUFNFRF9SRVFVRVNUX1RJTUUiLCJOSVNUIiwiYXN5bmMiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsIiwicGhvbmVOdW1iZXIiLCJzdHJlZXRBZGRyZXNzIiwiY2l0eSIsInN0YXRlIiwiemlwIiwicGFzc3dvcmQiLCJib2R5IiwiZGlyIiwicXVlcnkiLCJGSUVMRCIsImdldEJ5RW1haWwiLCJsZW5ndGgiLCJwYXNzd29yZExvY2FsIiwiaXNWYWxpZCIsImRlc2NyaXB0aW9uIiwiTklTVF9UT0tFTiIsIm5pc3RIYXNoIiwiZm91bmQiLCJVUkwiLCJpbmZvIiwiZW5jb2RlZCIsIkJ1ZmZlciIsImZyb20iLCJ0b1N0cmluZyIsImhhc2giLCJnZW5TYWx0IiwiaWQiLCJ1c2Vyc19pZCIsImUiLCJzdGRvdXQiLCJ3cml0ZSIsImVyclJlcyIsIkdFTkVSQUxfRkFJTFVSRSIsIkVSUk9SIiwiVU5LTk9XTiIsImVycm9yIiwiU3ludGF4RXJyb3IiLCJTWU5UQVgiLCJUeXBlRXJyb3IiLCJUWVBFIiwicmVzdWx0Iiwid2FybiIsInN1YnN0ciIsImluZGV4T2YiLCJVU0VSIiwiTk9UX0ZPVU5EIiwiYXV0aGVudGljYXRlZCIsImNvbXBhcmUiLCJNSVNTSU5HIiwiRU1BSUwiLCJVTktPV04iLCJSZWZlcmVuY2VFcnJvciIsIlJFRkVSRU5DRSIsImRlc3Ryb3kiLCJjbGVhckNvb2tpZSIsInNlbmRTdGF0dXMiLCJyYW5kb21CeXRlcyIsInN0YXRlT2JqIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsImlwQWRkciIsImNvbm5lY3Rpb24iLCJyZW1vdGVBZGRyZXNzIiwiQVVUSCIsIlNUQVRFX01JU1NJTkciLCJ1bmRlZmluZWQiLCJJUF9NSVNNQVRDSCIsIlNFU1NJT05fRVhQSVJFRCIsIlNUQVRFX05PVF9GT1VORCIsInNlbmQiLCJmcyIsIkRBVEFCQVNFX1VTRVJOQU1FIiwiREFUQUJBU0VfUEFTU1dPUkQiLCJEQVRBQkFTRV9IT1NUIiwiREFUQUJBU0VfUE9SVCIsIkRBVEFCQVNFX05BTUUiLCJOT0RFX0VOViIsIkNJIiwiRU5WIiwiZGVmIiwiU3RyaW5nIiwidHJpbSIsImhvc3QiLCJwb3J0IiwiZGF0YWJhc2UiLCJzc2wiLCJyZWplY3RVbmF1dGhvcml6ZWQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5B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bkNsSixRQUFRQyxJQUFJLGlDQUFpQ3FKLGVBQXVCbkwsR0FDcEU2QixRQUFRQyxJQUFJLHdCQUNLLGVBQWJxSixHQUNGdEosUUFBUUMsSUFBSSxzQkFDWjlCLEVBQU80TCxJQUFNLENBQ1gzTSxLQUFNLFVBRU5vRCxHQUFJd0ksRUFBRzdJLGFBQWEsMkJBRUEsZ0JBQWJtSixFQUNUdEosUUFBUUMsSUFBSSx1QkFFWkQsUUFBUUMsSUFBSSxnQkFDUHNKLEdBTUh2SixRQUFRQyxJQUFJLGFBQ1pELFFBQVFDLElBQUksdUJBTlo5QixFQUFPNEwsSUFBTSxDQUNYM00sTUFBTSxFQUNONE0sb0JBQW9CLElBTzFCaE8sRUFBT0QsUUFBVW9DIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxMik7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJmc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJleHByZXNzXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInBhdGhcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZXhwcmVzcy1zZXNzaW9uXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBqdG1vcnJpc2J5dGVzL2xpYlwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJkb3RlbnZcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibW9yZ2FuXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm1hc3NpdmVcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiaHR0cFwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJodHRwc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJjb25zdGFudHNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiY29ubmVjdC1zcWxpdGUzXCIpOyIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cImluZGV4LmQudHNcIiAvPlxyXG5pbXBvcnQgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcclxuY29uc3QgY29uZmlnID0gZG90ZW52LmNvbmZpZygpO1xyXG5pbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xyXG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XHJcbmltcG9ydCBtb3JnYW4gZnJvbSBcIm1vcmdhblwiO1xyXG5pbXBvcnQgbWFzc2l2ZSBmcm9tIFwibWFzc2l2ZVwiO1xyXG5pbXBvcnQgY29va2llcGFyc2VyIGZyb20gXCJjb29raWUtcGFyc2VyXCI7XHJcbmltcG9ydCBoZWxtZXQgZnJvbSBcImhlbG1ldFwiO1xyXG5pbXBvcnQgaHR0cCBmcm9tIFwiaHR0cFwiO1xyXG5pbXBvcnQgdHlwZSB7IFRsc09wdGlvbnMgfSBmcm9tIFwidGxzXCI7XHJcbmltcG9ydCBodHRwcyBmcm9tIFwiaHR0cHNcIjtcclxuaW1wb3J0IGNvbnN0YW50cyBmcm9tIFwiY29uc3RhbnRzXCI7XHJcblxyXG4vLyBnbG9iYWwubG9nID1cclxuLy8gICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCJcclxuLy8gICAgID8gZnVuY3Rpb24gKCkge31cclxuLy8gICAgIDogZnVuY3Rpb24gKC4uLnJlc3Q6W10pIHtcclxuLy8gICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbi8vICAgICAgICAgY29uc29sZS5sb2coXHJcbi8vICAgICAgICAgICBgW1RpbWU6ICR7ZGF0ZS5nZXRIb3VycygpfUgke2RhdGUuZ2V0TWludXRlcygpfU0gJHtkYXRlLmdldFNlY29uZHMoKX1TICR7ZGF0ZS5nZXRNaWxsaXNlY29uZHMoKX1NU11gLFxyXG4vLyAgICAgICAgICAgLi4ucmVzdFxyXG4vLyAgICAgICAgICk7XHJcbi8vICAgICAgIH07XHJcbi8vIGdsb2JhbC5kZWJ1ZyA9XHJcbi8vICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiID8gZnVuY3Rpb24gKCkge30gOiBjb25zb2xlLmRlYnVnO1xyXG5cclxubGV0IE5PREVfRU5WOiBzdHJpbmcgPSBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCBcIlwiO1xyXG5sZXQgU1NMX0NFUlQ6IHN0cmluZyA9IHByb2Nlc3MuZW52LlNTTF9DRVJUIHx8IFwiXCI7XHJcbmxldCBTU0xfS0VZOiBzdHJpbmcgPSBwcm9jZXNzLmVudi5TU0xfS0VZIHx8IFwiXCI7XHJcbmxldCBTU0xfQ0E6IHN0cmluZyA9IHByb2Nlc3MuZW52LlNTTF9DQSB8fCBcIlwiO1xyXG5sZXQgU0VTU0lPTl9TRUNSRVQgPSBwcm9jZXNzLmVudi5TRVNTSU9OX1NFQ1JFVCB8fCBcIlwiO1xyXG5sZXQgU0VSVkVSX1BPUlQ6IG51bWJlciA9IE51bWJlcihwcm9jZXNzLmVudi5TRVJWRVJfUE9SVCkgfHwgMzAwMDtcclxubGV0IFNFUlZFUl9IT1NUOiBzdHJpbmcgPSBwcm9jZXNzLmVudi5TRVJWRVJfSE9TVCB8fCBcIjEyNy4wLjAuMVwiO1xyXG4vL25vcm1hbGl6ZSB2YXJpYWJsZXNcclxuXHJcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcclxuXHJcbmFwcC51c2UocmVxdWlyZShcIi4vY29uZmlndXJlSGVsbWV0XCIpKTtcclxuLy8gZXhwcmVzcy1zZXNzaW9uXHJcbmltcG9ydCBzZXNzaW9uIGZyb20gXCJleHByZXNzLXNlc3Npb25cIjtcclxuaW1wb3J0IGNvbm5lY3RTdG9yZSBmcm9tIFwiY29ubmVjdC1zcWxpdGUzXCI7XHJcbmNvbnN0IFNRTGl0ZVN0b3JlID0gY29ubmVjdFN0b3JlKHNlc3Npb24pO1xyXG5zZXNzaW9uO1xyXG5sZXQgc2Vzc2lvbkNvbmZpZzogc2Vzc2lvbi5TZXNzaW9uT3B0aW9ucyA9IHtcclxuICBzdG9yZTogbmV3IFNRTGl0ZVN0b3JlKCksXHJcbiAgc2VjcmV0OiBTRVNTSU9OX1NFQ1JFVCxcclxuICByZXNhdmU6IGZhbHNlLFxyXG4gIHNhdmVVbmluaXRpYWxpemVkOiBmYWxzZSxcclxuICBjb29raWU6IHsgbWF4QWdlOiAxMDAwICogNjAgKiA1IH0sXHJcbn07XHJcblxyXG5pZiAoTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiKSB7XHJcbiAgc2Vzc2lvbkNvbmZpZy5jb29raWUuc2VjdXJlID0gdHJ1ZTtcclxufVxyXG5hcHAudXNlKHNlc3Npb24oc2Vzc2lvbkNvbmZpZykpO1xyXG5cclxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XHJcbi8vIHVzZSBtb3JnYW4gcmVxdWVzdCBsb2dnaW5nXHJcbmFwcC51c2UobW9yZ2FuKFwiZGV2XCIpKTtcclxuLy8gbW91bnQgcm91dGVzXHJcbmNvbnN0IHJvdXRlcyA9IHJlcXVpcmUoXCIuL3JvdXRlcy9pbmRleC5qc1wiKTtcclxuYXBwLnVzZShyb3V0ZXMucm9vdFBhdGgsIHJvdXRlcy5yb3V0ZXIpO1xyXG5cclxuLy8gZ2V0IG1hc3NpdmUgY29uZmlnXHJcbmNvbnN0IE1BU1NJVkVfQ09ORklHID0gcmVxdWlyZShcIi4vY29uZmlndXJlTWFzc2l2ZVwiKTtcclxuXHJcbi8vIGh0dHBzXHJcbmFzeW5jIGZ1bmN0aW9uIG1haW4oZGI/OiBhbnkpIHtcclxuICBpZiAoIWRiKSB7XHJcbiAgICBkYiA9IGF3YWl0IG1hc3NpdmUoTUFTU0lWRV9DT05GSUcpO1xyXG4gIH1cclxuICBhcHAuc2V0KFwiZGJcIiwgZGIpO1xyXG4gIGxldCBzZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcihhcHApO1xyXG4gIGlmIChOT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHtcclxuICAgIGNvbnNvbGUubG9nKFwibGF1bmNoaW5nIHNlcnZlciBpbiBwcm9kdWN0aW9uXCIpO1xyXG4gICAgbGV0IFNTTF9PUFRTOiBUbHNPcHRpb25zID0ge1xyXG4gICAgICBrZXk6IGZzLnJlYWRGaWxlU3luYyhwYXRoLnJlc29sdmUoU1NMX0tFWSB8fCBcInByaXZrZXkucGVtXCIpKSxcclxuICAgICAgY2VydDogZnMucmVhZEZpbGVTeW5jKHBhdGgucmVzb2x2ZShTU0xfQ0VSVCB8fCBcImZ1bGxjaGFpbi5wZW1cIikpLFxyXG4gICAgICBzZWN1cmVPcHRpb25zOiBjb25zdGFudHMuU1NMX09QX05PX1NTTHYzLFxyXG4gICAgICAvLyBjYTogW2ZzLnJlYWRGaWxlU3luYyhcImNoYWluLnBlbVwiKV0sXHJcbiAgICB9O1xyXG4gICAgaWYgKFNTTF9DQSkge1xyXG4gICAgICBTU0xfT1BUUy5jYSA9IFtmcy5yZWFkRmlsZVN5bmMoU1NMX0NBKV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXdhaXQgaHR0cHNcclxuICAgICAgLmNyZWF0ZVNlcnZlcihTU0xfT1BUUywgYXBwKVxyXG4gICAgICAubGlzdGVuKFNFUlZFUl9QT1JULCBTRVJWRVJfSE9TVCwgbnVsbCwgbnVsbCk7XHJcbiAgfSBlbHNlIGlmIChOT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcImxhdW5jaGluZyBzZXJ2ZXIgaW4gZGV2ZWxvcG1lbnRcIik7XHJcbiAgICByZXR1cm4gYXdhaXQgc2VydmVyLmxpc3RlbihTRVJWRVJfUE9SVCwgU0VSVkVSX0hPU1QpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zb2xlLmxvZyhcImxhdW5jaGluZyBzZXJ2ZXIgaW4gdGVzdCBtb2RlXCIpO1xyXG4gICAgcmV0dXJuIGF3YWl0IGFwcC5saXN0ZW4oU0VSVkVSX1BPUlQsIFNFUlZFUl9IT1NUKTtcclxuICB9XHJcbn1cclxuaWYgKE5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIiB8fCBOT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiKSB7XHJcbiAgbWFpbigpLnRoZW4oKHNlcnZlcikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYHNlcnZlciBsaXN0ZW5pbmcgb24gJHtTRVJWRVJfSE9TVH06JHtTRVJWRVJfUE9SVH1gKTtcclxuICB9KTtcclxufSBlbHNlIHtcclxuICBtb2R1bGUuZXhwb3J0cyA9IG1haW47XHJcbn1cclxuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvcmlnaW5hbE1vZHVsZSkge1xuXHRpZiAoIW9yaWdpbmFsTW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xuXHRcdHZhciBtb2R1bGUgPSBPYmplY3QuY3JlYXRlKG9yaWdpbmFsTW9kdWxlKTtcblx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcblx0XHRpZiAoIW1vZHVsZS5jaGlsZHJlbikgbW9kdWxlLmNoaWxkcmVuID0gW107XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJsb2FkZWRcIiwge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBtb2R1bGUubDtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCBcImlkXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJleHBvcnRzXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWVcblx0XHR9KTtcblx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcblx0fVxuXHRyZXR1cm4gbW9kdWxlO1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImhlbG1ldFwiKSh7XHJcbiAgY29udGVudFNlY3VyaXR5UG9saWN5OiB7XHJcbiAgICBkaXJlY3RpdmVzOiB7XHJcbiAgICAgIGRlZmF1bHRTcmM6IFtcIidzZWxmJ1wiXSxcclxuICAgICAgc3R5bGVTcmM6IFtcclxuICAgICAgICBcIidzZWxmJ1wiLFxyXG4gICAgICAgIFwiaHR0cHM6Ly9zdGFja3BhdGguYm9vdHN0cmFwY2RuLmNvbS9cIixcclxuICAgICAgICBcImh0dHBzOi8vd3d3LmFzcGllc29sdXRpb25zLmNvbS9cIixcclxuICAgICAgICBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9cIixcclxuICAgICAgXSxcclxuICAgIH0sXHJcbiAgfSxcclxuICBleHBlY3RDdDoge1xyXG4gICAgbWF4QWdlOiAwLFxyXG4gICAgcmVwb3J0VXJpOiBcImh0dHA6Ly9hc3BpZXNvbHV0aW9ucy5jb20vcmVwb3J0Y3RcIixcclxuICB9LFxyXG4gIGZlYXR1cmVQb2xpY3k6IHtcclxuICAgIGZlYXR1cmVzOiB7XHJcbiAgICAgIGxheW91dEFuaW1hdGlvbnM6IFtcIidzZWxmJ1wiXSxcclxuICAgICAgc3luY1NjcmlwdDogW1wiJ3NlbGYnXCJdLFxyXG4gICAgICBkb2N1bWVudERvbWFpbjogW1wiJ25vbmUnXCJdLFxyXG4gICAgfSxcclxuICB9LFxyXG59KTtcclxuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiaGVsbWV0XCIpOyIsImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKFwiZXhwcmVzc1wiKTtcclxuY29uc3QgUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXI7XHJcbmNvbnN0IGZzID0gcmVxdWlyZShcImZzXCIpO1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZShcInBhdGhcIik7XHJcbmNvbnN0IHJvb3RQYXRoID0gcHJvY2Vzcy5lbnYuQVBJX1JPT1QgfHwgXCIvYXBpXCI7XHJcbmNvbnN0IHJvdXRlcyA9IFJvdXRlcigpO1xyXG5cclxuLy8gcmVxdWlyZSByb3V0ZXJzXHJcbmNvbnN0IHsgZW5mb3JjZVVzZXJMb2dnZWRJbiB9ID0gcmVxdWlyZShcIi4uL2NvbnRyb2xsZXJzL2VuZm9yY2VBdXRoXCIpO1xyXG5cclxuZnVuY3Rpb24gcG9zdFJlcXVlc3QocmVxLCByZXMpIHtcclxuICBjb25zb2xlLmxvZyhcInRoaXMgZnVuY3Rpb24gcmFuIGFmdGVyIHRoZSByZXF1ZXN0IGZpbmlzaGVkXCIpO1xyXG59XHJcblxyXG5jb25zdCBhdXRoID0gcmVxdWlyZShcIi4vYXV0aFwiKTtcclxuXHJcbi8vIG1vdW50IHJvdXRlcnNcclxuLy8gY29uc3QgeyBlbmZvcmNlQ2xpZW50SWRFeGlzdHMgfSA9IHJlcXVpcmUoIFwiLi4vY29udHJvbGxlcnMvY2xpZW50SWRcIjtcclxuY29uc3QgeyBSRUFDVF9BUFBfQ0xJRU5UX0lEIH0gPSBwcm9jZXNzLmVudjtcclxuXHJcbi8vIHZlcmlmeSBjbGllbnQgaWRcclxuXHJcbi8vIHJvdXRlcy51c2UoZW5mb3JjZUNsaWVudElkRXhpc3RzKTtcclxucm91dGVzLnBvc3QoYXV0aC5iYXNlUGF0aCArIFwiL2xvZ291dFwiLCBhdXRoLmNvbnRyb2xsZXIubG9nT3V0KTtcclxucm91dGVzLnVzZShhdXRoLmJhc2VQYXRoLCBhdXRoLnJvdXRlcik7XHJcbnJvdXRlcy51c2UoZW5mb3JjZVVzZXJMb2dnZWRJbik7XHJcbi8vIGZpbmFsaXplIHRoZSByZXF1ZXN0XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHsgcm91dGVyOiByb3V0ZXMsIHJvb3RQYXRoIH07XHJcbiIsImNvbnN0IHtcclxuICBSRUFTT04sXHJcbiAgTUVTU0FHRV9OT1RfQVVUSE9SSVpFRCxcclxufSA9IHJlcXVpcmUoXCJAanRtb3JyaXNieXRlcy9saWJcIikuY29uc3RhbnRzO1xyXG5mdW5jdGlvbiBlbmZvcmNlVXNlckxvZ2dlZEluKHJlcSwgcmVzLCBuZXh0KSB7XHJcbiAgaWYgKCFyZXEuc2Vzc2lvbi51c2VyKSB7XHJcbiAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6IE1FU1NBR0VfTk9UX0FVVEhPUklaRUQsXHJcbiAgICAgIHJlYXNvbjogUkVBU09OLkxPR0lOLlJFUVVJUkVELFxyXG4gICAgICBwYXRoOiBcIi9hcGkvYXV0aC9sb2dpblwiLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbm1vZHVsZS5leHBvcnRzID0geyBlbmZvcmNlVXNlckxvZ2dlZEluIH07XHJcbiIsIi8vIGRvIHByb2Nlc3NpbmcgaGVyZVxyXG5jb25zdCBhdXRoID0gcmVxdWlyZShcIi4uL2NvbnRyb2xsZXJzL2F1dGhcIik7XHJcbmNvbnN0IHtcclxuICBsb2dJbixcclxuICBsb2dPdXQsXHJcbiAgcmVnaXN0ZXIsXHJcbiAgZ2V0VXNlcixcclxuICBzdGFydEF1dGhTZXNzaW9uLFxyXG4gIGNoZWNrQXV0aFN0YXRlLFxyXG4gIGdldFNlc3Npb24sXHJcbn0gPSBhdXRoO1xyXG5cclxuY29uc3Qgcm91dGVyID0gcmVxdWlyZShcImV4cHJlc3NcIikuUm91dGVyKCk7XHJcbmNvbnN0IGJhc2VQYXRoID0gXCIvYXV0aFwiO1xyXG5cclxuLypcclxuICAxLiBjbGllbnQgc3RhcnRzIGF1dGhlbnRpY2F0aW9uIGNoYWluIGJ5IFBPU1RpbmcgLywgaW5jbHVkaW5nIHRoZSBjbGllbnQgaWQgaW4gcmVxdWVzdC5cclxuICAyLiBjbGllbnQgcmVzcG9uZHMgd2l0aCBcIk9LXCIgaWYgYXV0aCBjaGVja3MgcGFzcywgYWxvbmcgd2l0aCBpbml0aWFsIGFwcGxpY2F0aW9uIHN0YXRlIGFuZCBhIHJhbmRvbSBhdXRoIHN0YXRlIHZhbHVlXHJcbiAgICAgKiBzZXJ2ZXIgd2lsbCBpbmZvcm0gY2xpZW50IGlmIHRoZSBzZXNzaW9uIGlzIHZhbGlkLiAgXHJcbiAgMy4gY2xpZW50IHdpbGwgYmUgcmVxdWlyZWQgdG8gbG9nIGluIHVzZXIgYmVmb3JlIGNvbnRpbnVpbmcuIHRoZSBuZXh0IHJvdXRlIHRoYXQgc2hvdWxkIGJlIGhpdCBpcyAvbG9naW4gb3IgL3JlZ2lzdGVyXHJcbiAgICAgKiB0aGUgY2xpZW50IHdpbGwgaGF2ZSB0byBhc2sgdGhlIHNlcnZlciBpZiB0aGUgdXNlciBpcyB2YWxpZFxyXG4gICAgICogdGhlIGNsaWVudCB3aWxsIGluY2x1ZGUgdGhlIHJhbmRvbSBzdGF0ZSB2YXJpYWJsZSBpbiB0aGUgbmV4dCBzdGVwIG9mIHRoZSByZXF1ZXN0XHJcbiAgICAgKiBcclxuKi9cclxucm91dGVyLnBvc3QoXCIvXCIsIHN0YXJ0QXV0aFNlc3Npb24pO1xyXG5cclxucm91dGVyLmdldChcIi91c2VyXCIsIGdldFVzZXIpO1xyXG5yb3V0ZXIuZ2V0KFwiL3Nlc3Npb25cIiwgZ2V0U2Vzc2lvbik7XHJcbi8vIHJvdXRlci51c2UoY2hlY2tUaW1lU3RhbXApO1xyXG5yb3V0ZXIucG9zdChcIi9yZWdpc3RlclwiLCBjaGVja0F1dGhTdGF0ZSwgcmVnaXN0ZXIpO1xyXG5yb3V0ZXIucG9zdChcIi9sb2dpblwiLCBjaGVja0F1dGhTdGF0ZSwgbG9nSW4pO1xyXG4vLyByb3V0ZXIucG9zdChcIi9sb2dvdXRcIiwgbG9nT3V0KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0geyByb3V0ZXIsIGJhc2VQYXRoLCBjb250cm9sbGVyOiB7IGxvZ0luLCBsb2dPdXQsIHJlZ2lzdGVyIH0gfTtcclxuIiwiLy8gQGZsb3dcclxuXHJcbmNvbnN0IHtcclxuICB2YWxpZGF0ZUVtYWlsLFxyXG4gIHZhbGlkYXRlUGFzc3dvcmQsXHJcbiAgY29uc3RhbnRzLFxyXG59ID0gcmVxdWlyZShcIkBqdG1vcnJpc2J5dGVzL2xpYlwiKTtcclxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZShcImJjcnlwdGpzXCIpO1xyXG5jb25zdCBheGlvcyA9IHJlcXVpcmUoXCJheGlvc1wiKTtcclxuY29uc3Qgc2hhMSA9IHJlcXVpcmUoXCJzaGExXCIpO1xyXG5jb25zdCBpbnNwZWN0ID1cclxuICByZXF1aXJlKFwidXRpbFwiKS5pbnBlY3QgfHxcclxuICAoKG8pID0+IHtcclxuICAgIG87XHJcbiAgfSk7XHJcbmNvbnN0IGNyeXB0byA9IHJlcXVpcmUoXCJjcnlwdG9cIik7XHJcbmNvbnN0IHtcclxuICBNRVNTQUdFX05PVF9BVVRIT1JJWkVELFxyXG4gIE1FU1NBR0VfQkFEX1JFUVVFU1QsXHJcbiAgUkVBU09OLFxyXG4gIE1FU1NBR0VfTk9UX0ZPVU5ELFxyXG4gIE1FU1NBR0UsXHJcbiAgUEFTU1dPUkQsXHJcbiAgTUFYX0VMQVBTRURfUkVRVUVTVF9USU1FLFxyXG59ID0gY29uc3RhbnRzO1xyXG5jb25zdCB7IE5JU1QgfSA9IFBBU1NXT1JEO1xyXG5mdW5jdGlvbiBnZXRTZXNzaW9uKHJlcSwgcmVzKSB7XHJcbiAgcmVzLmpzb24ocmVxLnNlc3Npb24gfHwge30pO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVyKHJlcSwgcmVzKSB7XHJcbiAgLy8gdHJ5IHRvIGRlc3RydWN0dXJlLCByZXNwb25kIHdpdGggNTAwIGlmIGl0IGZhaWxzXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgZmlyc3ROYW1lLFxyXG4gICAgICBsYXN0TmFtZSxcclxuICAgICAgZW1haWwsXHJcbiAgICAgIHBob25lTnVtYmVyLFxyXG4gICAgICBzdHJlZXRBZGRyZXNzLFxyXG4gICAgICBjaXR5LFxyXG4gICAgICBzdGF0ZSxcclxuICAgICAgemlwLFxyXG4gICAgICBwYXNzd29yZCxcclxuICAgIH0gPSByZXEuYm9keS51c2VyO1xyXG4gICAgY29uc29sZS5sb2coXCIvYXBpL2F1dGgvcmVnaXN0ZXIgY2FsbGVkXCIpO1xyXG4gICAgY29uc29sZS5kaXIocmVxLmJvZHkpO1xyXG4gICAgY29uc29sZS5kaXIocmVxLnF1ZXJ5KTtcclxuICAgIGNvbnN0IGRiID0gcmVxLmFwcC5nZXQoXCJkYlwiKTtcclxuICAgIGlmICghZW1haWwpIHtcclxuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIG1lc3NhZ2U6IFwiZmllbGQgZW1haWwgaXMgcmVxdWlyZWRcIixcclxuICAgICAgICByZWFzb246IFJFQVNPTi5SRVFVSVJFRC5GSUVMRCxcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICghdmFsaWRhdGVFbWFpbChlbWFpbCkpIHtcclxuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBgaW52YWxpZCBlbWFpbCAnJHtlbWFpbH0nYCB9KTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IGRiUmVzdWx0ID0gYXdhaXQgZGIudXNlci5nZXRCeUVtYWlsKGVtYWlsKTtcclxuICAgIGlmIChkYlJlc3VsdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogYGVtYWlsICR7ZW1haWx9IGlzIGFscmVhZHkgaW4gdXNlYCB9KTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKCFwYXNzd29yZCkge1xyXG4gICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogXCJmaWVsZCBwYXNzd29yZCBpcyByZXF1aXJlZFwiLFxyXG4gICAgICAgIHJlYXNvbjogUkVBU09OLlJFUVVJUkVELkZJRUxELFxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gZW1haWwgaXMgbWFya2VkIGFzIGEgdW5pcXVlLCByZXF1aXJlZCBmaWVsZC4gaWYgaXQgYWxyZWFkeSBleGlzdHMsIHRoZSBkYXRhYmFzZSB3aWxsIHRocm93IGFuIGVycm9yXHJcbiAgICAvLyBydW5cclxuICAgIGxldCBwYXNzd29yZExvY2FsID0gdmFsaWRhdGVQYXNzd29yZChwYXNzd29yZCk7XHJcbiAgICBpZiAocGFzc3dvcmRMb2NhbC5pc1ZhbGlkID09PSBmYWxzZSkge1xyXG4gICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogcGFzc3dvcmRMb2NhbC5kZXNjcmlwdGlvbixcclxuICAgICAgICByZWFzb246IHBhc3N3b3JkTG9jYWwucmVhc29uLFxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5JU1RfVE9LRU4pIHtcclxuICAgICAgY29uc29sZS5sb2coXCJhdHRlbXB0aW5nIE5JU1QgY2hlY2sgd2l0aCB0b2tlbiBcIiwgcHJvY2Vzcy5lbnYuTklTVF9UT0tFTik7XHJcbiAgICAgIGxldCBuaXN0SGFzaCA9IHNoYTEocGFzc3dvcmQpO1xyXG4gICAgICBsZXQgeyBmb3VuZCB9ID0gYXdhaXQgYXhpb3MuZ2V0KFxyXG4gICAgICAgIE5JU1QuVVJMICsgbmlzdEhhc2ggKyBgP2FwaV9rZXk9JHtwcm9jZXNzLmVudi5OSVNUX1RPS0VOfWBcclxuICAgICAgKTtcclxuICAgICAgaWYgKGZvdW5kKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICBcIlBhc3N3b3JkIGZvdW5kIGluIE5JU1QgRGF0YWJhc2UsIFJlZnVzaW5nIHRvIGFsbG93IHBhc3N3b3JkXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICAgIG1lc3NhZ2U6IE5JU1QuTUVTU0FHRSxcclxuICAgICAgICAgIHJlYXNvbjogTklTVC5SRUFTT04sXHJcbiAgICAgICAgICBpbmZvOiBcImh0dHBzOi8vcGFnZXMubmlzdC5nb3YvODAwLTYzLTMvXCIsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiUGFzc3dvcmQgbm90IGZvdW5kIGluIE5JU1QgRGF0YWJhc2UuIGNvbnRpbnVpbmdcIik7XHJcbiAgICB9XHJcbiAgICBsZXQgZW5jb2RlZCA9IEJ1ZmZlci5mcm9tKHBhc3N3b3JkKS50b1N0cmluZyhcImJhc2U2NFwiKTtcclxuICAgIGxldCBoYXNoID0gYXdhaXQgYmNyeXB0Lmhhc2goZW5jb2RlZCwgYXdhaXQgYmNyeXB0LmdlblNhbHQoMTUpKTtcclxuICAgIGxldCByZXN1bHQgPSBhd2FpdCBkYi51c2VyLmNyZWF0ZShcclxuICAgICAgZmlyc3ROYW1lLFxyXG4gICAgICBsYXN0TmFtZSxcclxuICAgICAgaGFzaCxcclxuICAgICAgZW1haWwsXHJcbiAgICAgIHBob25lTnVtYmVyLFxyXG4gICAgICBzdHJlZXRBZGRyZXNzLFxyXG4gICAgICBjaXR5LFxyXG4gICAgICBzdGF0ZSxcclxuICAgICAgemlwXHJcbiAgICApO1xyXG4gICAgbGV0IHVzZXIgPSByZXN1bHRbMF07XHJcbiAgICBjb25zb2xlLmxvZyhcIi9hcGkvYXV0aC9yZWdpc3RlciBEQiBjcmVhdGUgdXNlciByZXN1bHRcIiwgdXNlcik7XHJcbiAgICByZXEuc2Vzc2lvbi51c2VyID0ge1xyXG4gICAgICBpZDogdXNlci51c2Vyc19pZCxcclxuICAgIH07XHJcbiAgICByZXMuanNvbih7IHNlc3Npb246IHJlcS5zZXNzaW9uIH0pO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKFwiRmFpbGVkIHRvIHJlZ2lzdGVyIHVzZXIgXCIpO1xyXG4gICAgbGV0IGVyclJlcyA9IHtcclxuICAgICAgbWVzc2FnZTogTUVTU0FHRS5HRU5FUkFMX0ZBSUxVUkUsXHJcbiAgICAgIHJlYXNvbjogUkVBU09OLkVSUk9SLlVOS05PV04sXHJcbiAgICAgIGVycm9yOiBlLFxyXG4gICAgfTtcclxuICAgIGlmIChlIGluc3RhbmNlb2YgU3ludGF4RXJyb3IpIHtcclxuICAgICAgcHJvY2Vzcy5zdGRvdXQud3JpdGUoXCJiZWNhdXNlIG9mIGEgc3ludGF4IGVycm9yIFwiKTtcclxuICAgICAgZXJyUmVzLnJlYXNvbiA9IFJFQVNPTi5FUlJPUi5TWU5UQVg7XHJcbiAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBUeXBlRXJyb3IpIHtcclxuICAgICAgcHJvY2Vzcy5zdGRvdXQud3JpdGUoXCJiZWNhdXNlIG9mIGEgVHlwZSBFcnJvciBcIik7XHJcbiAgICAgIGVyclJlcy5yZWFzb24gPSBSRUFTT04uRVJST1IuVFlQRTtcclxuICAgIH1cclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKGVyclJlcyk7XHJcbiAgICBwcm9jZXNzLnN0ZG91dC53cml0ZShcIndpdGggc3RhY2t0cmFjZTpcXG5cIik7XHJcbiAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gIH1cclxufVxyXG5hc3luYyBmdW5jdGlvbiBnZXRTZXNzaW9uKHJlcSwgcmVzKSB7XHJcbiAgdHJ5IHtcclxuICAgIGxldCBzZXNzaW9uID0gcmVxLnNlc3Npb24gfHwgbnVsbDtcclxuICAgIHJlcy5zZW5kKHNlc3Npb24pO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZ2V0IHNlc3Npb25cIik7XHJcbiAgfVxyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGxvZ0luKHJlcSwgcmVzKSB7XHJcbiAgY29uc29sZS5sb2coXHJcbiAgICBcIi9hcGkvYXV0aC9sb2dpbjogbG9naW4gcmVxdWVzdGVkIHVzZXIgb2JqZWN0XCIsXHJcbiAgICByZXEuYm9keS51c2VyIHx8IFwiTk9UIEZPVU5EXCJcclxuICApO1xyXG4gIHRyeSB7XHJcbiAgICBsZXQgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5LnVzZXI7XHJcbiAgICBpZiAoIWVtYWlsKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihcIi9hcGkvYXV0aC9sb2dpbjogZW1haWwgd2FzIG1pc3NpbmcgZnJvbSByZXF1ZXN0XCIpO1xyXG5cclxuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIG1lc3NhZ2U6IE1FU1NBR0VfQkFEX1JFUVVFU1QsXHJcbiAgICAgICAgcmVhc29uOiBSRUFTT04uTE9HSU4uRU1BSUwuTUlTU0lORyxcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2UgaWYgKCFwYXNzd29yZCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oXCIvYXBpL2F1dGgvbG9naW46IHBhc3N3b3JkIHdhcyBtaXNzaW5nIGZyb20gcmVxdWVzdFwiKTtcclxuICAgICAgY29uc29sZS5kaXIocmVxLmJvZHkpO1xyXG4gICAgICBjb25zb2xlLmRpcihyZXEucXVlcnkpO1xyXG5cclxuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIG1lc3NhZ2U6IE1FU1NBR0VfQkFEX1JFUVVFU1QsXHJcbiAgICAgICAgcmVhc29uOiBSRUFTT04uTE9HSU4uUEFTU1dPUkQuTUlTU0lORyxcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhcInNlYXJjaGluZyBkYXRhYmFzZSBmb3IgdXNlcm5hbWVcIik7XHJcbiAgICAgIGxldCByZXN1bHQgPSBhd2FpdCByZXEuYXBwLmdldChcImRiXCIpLnVzZXIuZ2V0QnlFbWFpbChlbWFpbCk7XHJcbiAgICAgIGlmIChyZXN1bHQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKFxyXG4gICAgICAgICAgYC9hcGkvYXV0aC9sb2dpbjogdXNlciAnJHtlbWFpbC5zdWJzdHIoXHJcbiAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgIGVtYWlsLmluZGV4T2YoXCJAXCIpIC0gMlxyXG4gICAgICAgICAgKX0nIG5vdCBmb3VuZGBcclxuICAgICAgICApO1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcclxuICAgICAgICAgIG1lc3NhZ2U6IE1FU1NBR0VfTk9UX0FVVEhPUklaRUQsXHJcbiAgICAgICAgICByZWFzb246IFJFQVNPTi5VU0VSLk5PVF9GT1VORCxcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBsZXQgdXNlciA9IHJlc3VsdFswXTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIi9hcGkvYXV0aC9sb2dpbiB1c2VyIGZvdW5kLCBjb21wYXJpbmcgaGFzaFwiKTtcclxuICAgICAgICBhdXRoZW50aWNhdGVkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUoXHJcbiAgICAgICAgICBCdWZmZXIuZnJvbShwYXNzd29yZCkudG9TdHJpbmcoXCJiYXNlNjRcIiksXHJcbiAgICAgICAgICB1c2VyLmhhc2hcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmIChhdXRoZW50aWNhdGVkKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImxvZ2dpbmcgaW4gdXNlciB3aXRoIGlkOlwiLCB1c2VyLnVzZXJzX2lkKTtcclxuICAgICAgICAgIChyZXEuc2Vzc2lvbi51c2VyID0ge1xyXG4gICAgICAgICAgICBpZDogdXNlci51c2Vyc19pZCxcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICByZXMuanNvbih7IHNlc3Npb246IHJlcS5zZXNzaW9uIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCIvYXBpL2F1dGgvbG9naW4gcmVjaWV2ZWQgYW4gaW52YWxpZCBwYXNzd29yZFwiKTtcclxuICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcclxuICAgICAgICAgICAgbWVzc2FnZTogTUVTU0FHRV9OT1RfQVVUSE9SSVpFRCxcclxuICAgICAgICAgICAgcmVhc29uOiBSRUFTT04uTE9HSU4uUEFTU1dPUkQuTUlTU0lORyxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKFwiRmFpbGVkIHRvIGxvZyBpbiB1c2VyIFwiKTtcclxuICAgIGxldCBlcnJSZXMgPSB7XHJcbiAgICAgIG1lc3NhZ2U6IE1FU1NBR0UuR0VORVJBTF9GQUlMVVJFLFxyXG4gICAgICByZWFzb246IFJFQVNPTi5FUlJPUi5VTktPV04sXHJcbiAgICAgIGVycm9yOiBlLFxyXG4gICAgfTtcclxuICAgIGlmIChlIGluc3RhbmNlb2YgVHlwZUVycm9yKSB7XHJcbiAgICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKFwiYmVjYXVzZSBvZiBhIFR5cGVFcnJvclwiKTtcclxuICAgICAgZXJyUmVzLnJlYXNvbiA9IFJFQVNPTi5FUlJPUi5UWVBFO1xyXG4gICAgfVxyXG4gICAgaWYgKGUgaW5zdGFuY2VvZiBSZWZlcmVuY2VFcnJvcikge1xyXG4gICAgICBwcm9jZXNzLnN0ZG91dC53cml0ZShcImJlY2F1c2Ugb2YgYSBSZWZlcmVuY2VFcnJvclwiKTtcclxuICAgICAgZXJyUmVzLnJlYXNvbiA9IFJFQVNPTi5FUlJPUi5SRUZFUkVOQ0U7XHJcbiAgICB9XHJcbiAgICBwcm9jZXNzLnN0ZG91dC53cml0ZShcIiB3aXRoIHN0YWNrdHJhY2VcXG5cIiArIGluc3BlY3QoZSkpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oZXJyUmVzKTtcclxuICB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gbG9nT3V0KHJlcSwgcmVzKSB7XHJcbiAgcmVxLnNlc3Npb24uZGVzdHJveSgpO1xyXG4gIHJlcS5jbGVhckNvb2tpZShcImNvbm5lY3Quc2lkXCIpO1xyXG4gIHJlcy5zZW5kU3RhdHVzKDIwMCk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0VXNlcihyZXEsIHJlcykge1xyXG4gIGxldCB1c2VyID0gKHJlcS5zZXNzaW9uIHx8IHt9KS51c2VyIHx8IG51bGw7XHJcbiAgcmVzLmpzb24oeyB1c2VyOiB1c2VyIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0F1dGhTdGF0ZShyZXEsIHJlcywgbmV4dCkge1xyXG4gIC8vIGNvbnN0IHN0YXRlT2JqID0gcmVxLmFwcC5nZXQocmVxLnF1ZXJ5LnN0YXRlfHxyZXEuYm9keS5zdGF0ZSk7XHJcbiAgLy8gaWYoIXN0YXRlT2JqKVxyXG4gIC8vIGNvbnN0IHsgdGltZXN0YW1wLCBzdGF0ZSwgaXBBZGRyIH0gPSBhdXRoIHx8IHt9O1xyXG4gIGlmICghcmVxLmJvZHkpIHtcclxuICAgIHJlc1xyXG4gICAgICAuc3RhdHVzKDQwMClcclxuICAgICAgLmpzb24oeyBtZXNzYWdlOiBNRVNTQUdFX0JBRF9SRVFVRVNULCByZWFzb246IFwiTUlTU0lOR19SRVFVRVNUX0JPRFlcIiB9KTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgaWYgKCFyZXEuYm9keS5zdGF0ZSkge1xyXG4gICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xyXG4gICAgICBtZXNzYWdlOiBNRVNTQUdFX05PVF9BVVRIT1JJWkVELFxyXG4gICAgICByZWFzb246IFJFQVNPTi5BVVRILlNUQVRFX01JU1NJTkcsXHJcbiAgICAgIHBhdGg6IFwiYm9keVwiLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIGxldCBzdGF0ZSA9IHJlcS5hcHAuZ2V0KHJlcS5ib2R5LnN0YXRlKTtcclxuICBpZiAoIXN0YXRlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhzdGF0ZSwgcmVxLmJvZHkuc3RhdGUpO1xyXG4gICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xyXG4gICAgICBtZXNzYWdlOiBNRVNTQUdFX05PVF9BVVRIT1JJWkVELFxyXG4gICAgICByZWFzb246IFJFQVNPTi5BVVRILlNUQVRFX05PVF9GT1VORCxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBpZiAoc3RhdGUuaXBBZGRyICE9IHJlcS5jb25uZWN0aW9uLnJlbW90ZUFkZHJlc3MpIHtcclxuICAgIHJlcS5hcHAuc2V0KHN0YXRlLnN0YXRlLCB1bmRlZmluZWQpO1xyXG4gICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xyXG4gICAgICBtZXNzYWdlOiBNRVNTQUdFX05PVF9BVVRIT1JJWkVELFxyXG4gICAgICByZWFzb246IFJFQVNPTi5BVVRILklQX01JU01BVENILFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIGxldCBjdXJyZW50VGltZXN0YW1wID0gRGF0ZS5ub3coKTtcclxuICBpZiAoY3VycmVudFRpbWVzdGFtcCA+IHN0YXRlLnRpbWVzdGFtcCArIE1BWF9FTEFQU0VEX1JFUVVFU1RfVElNRSkge1xyXG4gICAgcmVxLmFwcC5zZXQoc3RhdGUuc3RhdGUsIHVuZGVmaW5lZCk7XHJcbiAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6IE1FU1NBR0VfTk9UX0FVVEhPUklaRUQsXHJcbiAgICAgIHJlYXNvbjogUkVBU09OLkFVVEguU0VTU0lPTl9FWFBJUkVELFxyXG4gICAgfSk7XHJcbiAgICAvLyBpZiB0aGVyZSBpcyBhbHJlYWR5IGFuIGF1dGggc2Vzc2lvblxyXG4gICAgcmV0dXJuO1xyXG4gICAgLy8gaWYgdGhlIHVzZXIganVtcHMgYmV0d2VlbiBkZXZpY2VzIG9yIHRoZXJlIGlzIGFuIGlwIGFkZHJlc3MgbWlzbWF0Y2gsIGNsZWFyIHNlc3Npb24gYW5kIGNvb2tpZVxyXG4gIH1cclxuICBuZXh0KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0YXJ0QXV0aFNlc3Npb24ocmVxLCByZXMpIHtcclxuICAvLyBpZiB3ZSBhbHJlYWR5IGhhdmUgYSBzZXNzaW9uLCBjbGVhciB0aGUgc2Vzc2lvblxyXG4gIC8vIGFuZCByZXN0YXJ0IGl0XHJcbiAgY29uc3Qgc3RhdGUgPSBjcnlwdG8ucmFuZG9tQnl0ZXMoNjQpLnRvU3RyaW5nKFwiYmFzZTY0XCIpO1xyXG4gIGNvbnN0IHN0YXRlT2JqID0ge1xyXG4gICAgc3RhdGUsXHJcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICBpcEFkZHI6IHJlcS5jb25uZWN0aW9uLnJlbW90ZUFkZHJlc3MsXHJcbiAgfTtcclxuICByZXEuYXBwLnNldChzdGF0ZSwgc3RhdGVPYmopO1xyXG5cclxuICByZXMuanNvbihzdGF0ZU9iaik7XHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgcmVnaXN0ZXIsXHJcbiAgbG9nSW4sXHJcbiAgbG9nT3V0LFxyXG4gIGdldFVzZXIsXHJcbiAgc3RhcnRBdXRoU2Vzc2lvbixcclxuICBjaGVja0F1dGhTdGF0ZSxcclxuICBnZXRTZXNzaW9uLFxyXG59O1xyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJiY3J5cHRqc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJheGlvc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJzaGExXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInV0aWxcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiY3J5cHRvXCIpOyIsImNvbnN0IGZzID0gcmVxdWlyZShcImZzXCIpO1xyXG5sZXQge1xyXG4gIERBVEFCQVNFX1VTRVJOQU1FLFxyXG4gIERBVEFCQVNFX1BBU1NXT1JELFxyXG4gIERBVEFCQVNFX0hPU1QsXHJcbiAgREFUQUJBU0VfUE9SVCxcclxuICBEQVRBQkFTRV9OQU1FLFxyXG4gIE5PREVfRU5WLFxyXG4gIENJLFxyXG59ID0gcHJvY2Vzcy5lbnY7XHJcblxyXG5mdW5jdGlvbiBFTlYoZW52LCBkZWYpIHtcclxuICByZXR1cm4gZW52ID8gU3RyaW5nKGVudikudHJpbSgpIDogZGVmO1xyXG59XHJcbk5PREVfRU5WID0gRU5WKE5PREVfRU5WLCBcInRlc3RcIik7XHJcbmxldCBjb25maWcgPSB7XHJcbiAgaG9zdDogRU5WKERBVEFCQVNFX0hPU1QsIFwibG9jYWxob3N0XCIpLFxyXG4gIHBvcnQ6IEVOVihEQVRBQkFTRV9QT1JULCBcIjU0MzJcIiksXHJcbiAgZGF0YWJhc2U6IEVOVihEQVRBQkFTRV9OQU1FLCBcInRlc3RVc2VyXCIpLFxyXG4gIHVzZXI6IEVOVihEQVRBQkFTRV9VU0VSTkFNRSwgXCJwb3N0Z3Jlc1wiKSxcclxuICBwYXNzd29yZDogRU5WKERBVEFCQVNFX1BBU1NXT1JELCBcIlwiKSxcclxufTtcclxuXHJcbmNvbnNvbGUubG9nKGBjb25maWd1cmVNYXNzaXZlOiBOT0RFX0VOViBpcyAke05PREVfRU5WfSwgY29uZmlnIGlzYCwgY29uZmlnKTtcclxuY29uc29sZS5sb2coYENvbmZpZ3VyaW5nIG1hc3NpdmUgYCk7XHJcbmlmIChOT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHtcclxuICBjb25zb2xlLmxvZyhcImZvciBwcm9kdWN0aW9uXFxyXFxuXCIpO1xyXG4gIGNvbmZpZy5zc2wgPSB7XHJcbiAgICBtb2RlOiBcInJlcXVpcmVcIixcclxuICAgIC8vIHJlamVjdFVuYXV0aG9yaXplZDogZmFsc2UsXHJcbiAgICBjYTogZnMucmVhZEZpbGVTeW5jKFwiZGIuY2EtY2VydGlmaWNhdGUuY3J0XCIpLFxyXG4gIH07XHJcbn0gZWxzZSBpZiAoTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIikge1xyXG4gIGNvbnNvbGUubG9nKFwiIGZvciBkZXZlbG9wbWVudFxcblwiKTtcclxufSBlbHNlIHtcclxuICBjb25zb2xlLmxvZyhcImZvciB0ZXN0aW5nIFwiKTtcclxuICBpZiAoIUNJKSB7XHJcbiAgICBjb25maWcuc3NsID0ge1xyXG4gICAgICBtb2RlOiB0cnVlLFxyXG4gICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlLFxyXG4gICAgfTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS5sb2coXCJvbiBDSVxcclxcblwiKTtcclxuICAgIGNvbnNvbGUubG9nKFwib24gYSBsb2NhbCBtYWNoaW5lXCIpO1xyXG4gIH1cclxufVxyXG5tb2R1bGUuZXhwb3J0cyA9IGNvbmZpZztcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==